{
    "title": "Sales Performance Report (SQL)",
    "connections": {
        "sales_db": {
            "connection_string": "sqlite+aiosqlite:///examples/sales.sqlite3",
            "type": "sqlite"
        }
    },
    "parameters": {
        "year": "2024"
    },
    "sections": [
        {
            "section_id": "monthly_sales",
            "name": "Monthly Sales Trend",
            "type": "graph",
            "grid": {
                "row_start": 0,
                "row_end": 1,
                "col_start": 0,
                "col_end": 6
            },
            "config": {
                "vega_lite_spec": {
                    "mark": {"type": "line", "point": true},
                    "height": 100,
                    "encoding": {
                        "x": {
                            "field": "month",
                            "type": "temporal",
                            "title": "Month"
                        },
                        "y": {
                            "field": "sales",
                            "type": "quantitative",
                            "title": "Sales ($)"
                        },
                        "tooltip": [
                            {"field": "month", "type": "temporal", "title": "Month"},
                            {"field": "sales", "type": "quantitative", "title": "Sales ($)"}
                        ]
                    }
                }
            },
            "data_source": {
                "type": "sql",
                "connection_id": "sales_db",
                "query": "SELECT strftime('%Y-%m', month) as month, sales FROM monthly_sales WHERE strftime('%Y', month) = :year ORDER BY month DESC LIMIT 3"
            }
        },
        {
            "section_id": "sales_distribution",
            "name": "Sales Distribution",
            "type": "graph",
            "grid": {
                "row_start": 0,
                "row_end": 1,
                "col_start": 6,
                "col_end": 12
            },
            "config": {
                "vega_lite_spec": {
                    "mark": "arc",
                    "height": 200,
                    "encoding": {
                        "theta": {
                            "field": "sales",
                            "type": "quantitative",
                            "aggregate": "sum"
                        },
                        "color": {
                            "field": "month_name",
                            "type": "nominal",
                            "title": "Month",
                            "scale": {
                                "scheme": "spectral"
                            }
                        },
                        "tooltip": [
                            {"field": "month_name", "type": "nominal", "title": "Month"},
                            {"field": "sales", "type": "quantitative", "title": "Sales ($)"}
                        ]
                    }
                }
            },
            "data_source": {
                "type": "sql",
                "connection_id": "sales_db",
                "query": "SELECT strftime('%Y-%m', month) as month, sales, CASE strftime('%m', month) WHEN '01' THEN 'January' WHEN '02' THEN 'February' WHEN '03' THEN 'March' WHEN '04' THEN 'April' WHEN '05' THEN 'May' WHEN '06' THEN 'June' WHEN '07' THEN 'July' WHEN '08' THEN 'August' WHEN '09' THEN 'September' WHEN '10' THEN 'October' WHEN '11' THEN 'November' WHEN '12' THEN 'December' END as month_name FROM monthly_sales WHERE strftime('%Y', month) = :year ORDER BY month ASC"
            }
        },
        {
            "section_id": "top_products",
            "name": "Top Selling Products",
            "type": "table",
            "grid": {
                "row_start": 1,
                "row_end": 2,
                "col_start": 0,
                "col_end": 12
            },
            "config": {
                "columns": [
                    {"name": "Product", "type": "string"},
                    {"name": "Category", "type": "string"},
                    {"name": "Units Sold", "type": "number", "format": "0,0", "parse": "int"},
                    {"name": "Revenue", "type": "number", "format": "$0,0.00", "parse": "float"}
                ],
                "max_results": 10
            },
            "data_source": {
                "type": "sql",
                "connection_id": "sales_db",
                "query": "SELECT name as Product, category as Category, units_sold as 'Units Sold', revenue as Revenue FROM products WHERE strftime('%Y', date) = :year ORDER BY revenue DESC"
            }
        },
        {
            "section_id": "random_graph",
            "name": "Random Graph",
            "type": "graph",
            "grid": {
                "row_start": 1,
                "row_end": 2,
                "col_start": 0,
                "col_end": 12
            },
            "config": {
                "vega_lite_spec": {
                    "mark": "bar",
                    "height": 200,
                    "encoding": {
                        "x": {"field": "category", "type": "nominal", "title": "Category"},
                        "y": {"field": "value", "type": "quantitative", "title": "Value"}
                    }
                }
            },
            "data_source": {
                "type": "sql",
                "connection_id": "sales_db",
                "query": "SELECT 'A' as category, abs(random() % 100) as value UNION ALL SELECT 'B', abs(random() % 100) UNION ALL SELECT 'C', abs(random() % 100)"
            }
        }
    ],
    "orientation": "portrait",
    "paper_size": "a4",
    "margin": 36,
    "logo_path": "assets/logo.png"
}
